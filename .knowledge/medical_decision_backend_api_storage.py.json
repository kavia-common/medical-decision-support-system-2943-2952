{"is_source_file": true, "format": "Python", "description": "This is a Python source file defining storage classes for managing session data and files, including local filesystem storage, a placeholder for cloud storage (OneDrive), and a hybrid storage class that combines both methods.", "external_files": ["utils"], "external_methods": ["ensure_dir", "safe_json_dump", "now_iso"], "published": ["StorageError", "BaseStorage", "LocalStorage", "OneDriveStorage", "HybridStorage"], "classes": [{"name": "StorageError", "description": "Custom exception class for storage-related errors."}, {"name": "BaseStorage", "description": "Abstract base class defining the storage interface for session data and files."}, {"name": "LocalStorage", "description": "Implementation of storage using the local filesystem, storing session notes and files in structured directories."}, {"name": "OneDriveStorage", "description": "Placeholder implementation for integrating with OneDrive cloud storage, currently simulated for demonstration."}, {"name": "HybridStorage", "description": "Composite storage class that tries cloud storage first, then falls back to local filesystem."}], "methods": [{"name": "None save_session_note(self, session_id: str, note: Dict[str, Any])", "description": "Saves a structured note for a session.", "scope": "OneDriveStorage", "scopeKind": "class"}, {"name": "Optional[Dict[str,Any]] get_latest_note(self, session_id: str)", "description": "Retrieves the latest note for a session.", "scope": "OneDriveStorage", "scopeKind": "class"}, {"name": "str save_file(self, session_id: str, filename: str, content: bytes)", "description": "Stores a file attached to a session, returning its storage path.", "scope": "OneDriveStorage", "scopeKind": "class"}, {"name": "Dict[str,Any] list_files(self, session_id: str)", "description": "Lists files associated with a session.", "scope": "OneDriveStorage", "scopeKind": "class"}, {"name": "__init__(self)", "scope": "OneDriveStorage", "scopeKind": "class", "description": "unavailable"}, {"name": "__init__(self, root: Optional[str] = None)", "scope": "LocalStorage", "scopeKind": "class", "description": "unavailable"}, {"name": "_ensure_enabled(self)", "scope": "OneDriveStorage", "scopeKind": "class", "description": "unavailable"}, {"name": "str _files_dir(self, session_id: str)", "scope": "LocalStorage", "scopeKind": "class", "description": "unavailable"}, {"name": "str _notes_path(self, session_id: str)", "scope": "LocalStorage", "scopeKind": "class", "description": "unavailable"}, {"name": "str _session_dir(self, session_id: str)", "scope": "LocalStorage", "scopeKind": "class", "description": "unavailable"}], "calls": ["ensure_dir", "safe_json_dump", "now_iso", "json.loads", "os.path.join", "os.path.exists", "os.listdir", "os.path.isdir", "os.path.isfile", "open"], "search-terms": ["storage", "session notes", "local filesystem", "file storage", "session files", "storage classes", "HybridStorage", "storage interface"], "state": 2, "file_id": 21, "knowledge_revision": 43, "git_revision": "", "ctags": [{"_type": "tag", "name": "BaseStorage", "path": "/home/kavia/workspace/code-generation/medical-decision-support-system-2943-2952/medical_decision_backend/api/storage.py", "pattern": "/^class BaseStorage:$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "DEFAULT_STORAGE_ROOT", "path": "/home/kavia/workspace/code-generation/medical-decision-support-system-2943-2952/medical_decision_backend/api/storage.py", "pattern": "/^DEFAULT_STORAGE_ROOT = os.path.join(os.path.dirname(os.path.dirname(__file__)), \"storage\")$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "HybridStorage", "path": "/home/kavia/workspace/code-generation/medical-decision-support-system-2943-2952/medical_decision_backend/api/storage.py", "pattern": "/^class HybridStorage(BaseStorage):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "LocalStorage", "path": "/home/kavia/workspace/code-generation/medical-decision-support-system-2943-2952/medical_decision_backend/api/storage.py", "pattern": "/^class LocalStorage(BaseStorage):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "OneDriveStorage", "path": "/home/kavia/workspace/code-generation/medical-decision-support-system-2943-2952/medical_decision_backend/api/storage.py", "pattern": "/^class OneDriveStorage(BaseStorage):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "StorageError", "path": "/home/kavia/workspace/code-generation/medical-decision-support-system-2943-2952/medical_decision_backend/api/storage.py", "pattern": "/^class StorageError(Exception):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/medical-decision-support-system-2943-2952/medical_decision_backend/api/storage.py", "pattern": "/^    def __init__(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "HybridStorage", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/medical-decision-support-system-2943-2952/medical_decision_backend/api/storage.py", "pattern": "/^    def __init__(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "OneDriveStorage", "scopeKind": "class"}, {"_type": "tag", "name": "__init__", "path": "/home/kavia/workspace/code-generation/medical-decision-support-system-2943-2952/medical_decision_backend/api/storage.py", "pattern": "/^    def __init__(self, root: Optional[str] = None):$/", "language": "Python", "kind": "member", "signature": "(self, root: Optional[str] = None)", "scope": "LocalStorage", "scopeKind": "class"}, {"_type": "tag", "name": "_ensure_enabled", "path": "/home/kavia/workspace/code-generation/medical-decision-support-system-2943-2952/medical_decision_backend/api/storage.py", "pattern": "/^    def _ensure_enabled(self):$/", "language": "Python", "kind": "member", "signature": "(self)", "scope": "OneDriveStorage", "scopeKind": "class"}, {"_type": "tag", "name": "_files_dir", "path": "/home/kavia/workspace/code-generation/medical-decision-support-system-2943-2952/medical_decision_backend/api/storage.py", "pattern": "/^    def _files_dir(self, session_id: str) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "member", "signature": "(self, session_id: str)", "scope": "LocalStorage", "scopeKind": "class"}, {"_type": "tag", "name": "_notes_path", "path": "/home/kavia/workspace/code-generation/medical-decision-support-system-2943-2952/medical_decision_backend/api/storage.py", "pattern": "/^    def _notes_path(self, session_id: str) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "member", "signature": "(self, session_id: str)", "scope": "LocalStorage", "scopeKind": "class"}, {"_type": "tag", "name": "_session_dir", "path": "/home/kavia/workspace/code-generation/medical-decision-support-system-2943-2952/medical_decision_backend/api/storage.py", "pattern": "/^    def _session_dir(self, session_id: str) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "member", "signature": "(self, session_id: str)", "scope": "LocalStorage", "scopeKind": "class"}, {"_type": "tag", "name": "get_latest_note", "path": "/home/kavia/workspace/code-generation/medical-decision-support-system-2943-2952/medical_decision_backend/api/storage.py", "pattern": "/^    def get_latest_note(self, session_id: str) -> Optional[Dict[str, Any]]:$/", "language": "Python", "typeref": "typename:Optional[Dict[str,Any]]", "kind": "member", "signature": "(self, session_id: str)", "scope": "BaseStorage", "scopeKind": "class"}, {"_type": "tag", "name": "get_latest_note", "path": "/home/kavia/workspace/code-generation/medical-decision-support-system-2943-2952/medical_decision_backend/api/storage.py", "pattern": "/^    def get_latest_note(self, session_id: str) -> Optional[Dict[str, Any]]:$/", "language": "Python", "typeref": "typename:Optional[Dict[str,Any]]", "kind": "member", "signature": "(self, session_id: str)", "scope": "HybridStorage", "scopeKind": "class"}, {"_type": "tag", "name": "get_latest_note", "path": "/home/kavia/workspace/code-generation/medical-decision-support-system-2943-2952/medical_decision_backend/api/storage.py", "pattern": "/^    def get_latest_note(self, session_id: str) -> Optional[Dict[str, Any]]:$/", "language": "Python", "typeref": "typename:Optional[Dict[str,Any]]", "kind": "member", "signature": "(self, session_id: str)", "scope": "LocalStorage", "scopeKind": "class"}, {"_type": "tag", "name": "get_latest_note", "path": "/home/kavia/workspace/code-generation/medical-decision-support-system-2943-2952/medical_decision_backend/api/storage.py", "pattern": "/^    def get_latest_note(self, session_id: str) -> Optional[Dict[str, Any]]:$/", "language": "Python", "typeref": "typename:Optional[Dict[str,Any]]", "kind": "member", "signature": "(self, session_id: str)", "scope": "OneDriveStorage", "scopeKind": "class"}, {"_type": "tag", "name": "list_files", "path": "/home/kavia/workspace/code-generation/medical-decision-support-system-2943-2952/medical_decision_backend/api/storage.py", "pattern": "/^    def list_files(self, session_id: str) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "member", "signature": "(self, session_id: str)", "scope": "BaseStorage", "scopeKind": "class"}, {"_type": "tag", "name": "list_files", "path": "/home/kavia/workspace/code-generation/medical-decision-support-system-2943-2952/medical_decision_backend/api/storage.py", "pattern": "/^    def list_files(self, session_id: str) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "member", "signature": "(self, session_id: str)", "scope": "HybridStorage", "scopeKind": "class"}, {"_type": "tag", "name": "list_files", "path": "/home/kavia/workspace/code-generation/medical-decision-support-system-2943-2952/medical_decision_backend/api/storage.py", "pattern": "/^    def list_files(self, session_id: str) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "member", "signature": "(self, session_id: str)", "scope": "LocalStorage", "scopeKind": "class"}, {"_type": "tag", "name": "list_files", "path": "/home/kavia/workspace/code-generation/medical-decision-support-system-2943-2952/medical_decision_backend/api/storage.py", "pattern": "/^    def list_files(self, session_id: str) -> Dict[str, Any]:$/", "language": "Python", "typeref": "typename:Dict[str,Any]", "kind": "member", "signature": "(self, session_id: str)", "scope": "OneDriveStorage", "scopeKind": "class"}, {"_type": "tag", "name": "save_file", "path": "/home/kavia/workspace/code-generation/medical-decision-support-system-2943-2952/medical_decision_backend/api/storage.py", "pattern": "/^    def save_file(self, session_id: str, filename: str, content: bytes) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "member", "signature": "(self, session_id: str, filename: str, content: bytes)", "scope": "BaseStorage", "scopeKind": "class"}, {"_type": "tag", "name": "save_file", "path": "/home/kavia/workspace/code-generation/medical-decision-support-system-2943-2952/medical_decision_backend/api/storage.py", "pattern": "/^    def save_file(self, session_id: str, filename: str, content: bytes) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "member", "signature": "(self, session_id: str, filename: str, content: bytes)", "scope": "HybridStorage", "scopeKind": "class"}, {"_type": "tag", "name": "save_file", "path": "/home/kavia/workspace/code-generation/medical-decision-support-system-2943-2952/medical_decision_backend/api/storage.py", "pattern": "/^    def save_file(self, session_id: str, filename: str, content: bytes) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "member", "signature": "(self, session_id: str, filename: str, content: bytes)", "scope": "LocalStorage", "scopeKind": "class"}, {"_type": "tag", "name": "save_file", "path": "/home/kavia/workspace/code-generation/medical-decision-support-system-2943-2952/medical_decision_backend/api/storage.py", "pattern": "/^    def save_file(self, session_id: str, filename: str, content: bytes) -> str:$/", "language": "Python", "typeref": "typename:str", "kind": "member", "signature": "(self, session_id: str, filename: str, content: bytes)", "scope": "OneDriveStorage", "scopeKind": "class"}, {"_type": "tag", "name": "save_session_note", "path": "/home/kavia/workspace/code-generation/medical-decision-support-system-2943-2952/medical_decision_backend/api/storage.py", "pattern": "/^    def save_session_note(self, session_id: str, note: Dict[str, Any]) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, session_id: str, note: Dict[str, Any])", "scope": "BaseStorage", "scopeKind": "class"}, {"_type": "tag", "name": "save_session_note", "path": "/home/kavia/workspace/code-generation/medical-decision-support-system-2943-2952/medical_decision_backend/api/storage.py", "pattern": "/^    def save_session_note(self, session_id: str, note: Dict[str, Any]) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, session_id: str, note: Dict[str, Any])", "scope": "HybridStorage", "scopeKind": "class"}, {"_type": "tag", "name": "save_session_note", "path": "/home/kavia/workspace/code-generation/medical-decision-support-system-2943-2952/medical_decision_backend/api/storage.py", "pattern": "/^    def save_session_note(self, session_id: str, note: Dict[str, Any]) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, session_id: str, note: Dict[str, Any])", "scope": "LocalStorage", "scopeKind": "class"}, {"_type": "tag", "name": "save_session_note", "path": "/home/kavia/workspace/code-generation/medical-decision-support-system-2943-2952/medical_decision_backend/api/storage.py", "pattern": "/^    def save_session_note(self, session_id: str, note: Dict[str, Any]) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "member", "signature": "(self, session_id: str, note: Dict[str, Any])", "scope": "OneDriveStorage", "scopeKind": "class"}], "hash": "7b39a5a837ab342737f9cb37ccc48458", "format-version": 4, "code-base-name": "medical_decision_backend", "filename": "medical_decision_backend/api/storage.py", "fields": [{"name": "DEFAULT_STORAGE_ROOT = os.path.join(os.path.dirname(os.path.dirname(__file__)), \"storage\")", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"43": ""}]}